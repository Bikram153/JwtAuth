@page "/register"
@using BlazorWasmClient.Models
@using BlazorWasmClient.Services
@inject AuthService Authservice
@inject NavigationManager Nav

<h3>Register</h3>

<EditForm Model="_user" OnValidSubmit="HandleRegister">
	<InputText @bind-Value="_user.Username" placeholder="Username" />
	<InputText @bind-Value="_user.Password" type="password" placeholder="Password" />
	<select @bind="_user.Role">
		<option value="User">User</option>
		<option value="Admin">Admin</option>
	</select>
	<button type="submit">Register</button>
</EditForm>
	
@code {
	private UserDto _user = new();

	private async Task HandleRegister()
	{
		var success = await Authservice.Register(_user);
		if(success)
		{
			Nav.NavigateTo("/login");
		}
	}
}
